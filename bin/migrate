#!/bin/bash
SCRIPT_DIR=$(cd $(dirname $0); pwd)
MOUNT_DIR=/app

set -x

#docker run --rm \
#    -e FLASK_APP=${MOUNT_DIR}/migrate.py \
#    --env-file ${SCRIPT_DIR}/.env \
#    -w ${MOUNT_DIR} \
#    -v ${SCRIPT_DIR}/../:${MOUNT_DIR} \
#    -it flask-migrater-discord:latest /bin/bash -c "\
#        flask db init ||
#        flask db migrate -m "Create results table" &&
#        flask db upgrade
#    "

docker run --rm \
    -e FLASK_APP=${MOUNT_DIR}/migrate.py \
    --env-file ${SCRIPT_DIR}/.env \
    -w ${MOUNT_DIR} \
    -v ${SCRIPT_DIR}/../:${MOUNT_DIR} \
    -it flask-migrater-discord:latest /bin/bash
